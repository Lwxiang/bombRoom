# 游戏部分的API接口 (所有接口分为大厅部分/游戏部分)

## 主要逻辑流程

1. 1. 房主点击开始游戏,请求```/start/```,开始游戏 (to 2
   2. 其他玩家通过不断请求```/room/```,若```info.start = true```,开始游戏 (to 2

2. 不断请求```/query/```来获取游戏信息, 不断请求```/turn/```来询问当前是否轮到自己 (to 3

3. 轮到自己的回合,可以输入指令来进行游戏,每一条指令输入后请求```/action/```来执行(于此同时2不断循环) (to 4

4. ```/query/```获知当只剩下一个人时游戏结束 (to 1

## 主要接口

所有返回数据由```status```和```info```组成

以下所有的返回数据描述均为```info```内的字段

---

#### start

开始当前房间的游戏

URL:```/start/```

格式:```JSON```

HTTP请求方式:``GET```

请求参数:

|字段|必选|说明|
|---|---|---|
|无|

返回结果:

|字段|说明|
|---|---|
|uid|房间id|


JSON示例:

{"status": "0", "info": {"uid": 4}}

注: status 0 为开始失败, 通常为房间内只有一个玩家

---

#### query

请求当前游戏的信息

URL:```/query/```

格式:```JSON```

HTTP请求方式:``GET```

请求参数:

|字段|必选|说明|
|---|---|---|
|mid|yes|当前客户端收到的最大信息的编号|

返回结果:

|字段|说明|
|---|---|
|uid|请求玩家的uid|
|name|请求玩家的昵称|
|order_id|房间内的玩家id列表(顺序)|
|order_name|房间内的玩家名字列表(与order_id一一对应)|
|position|房间内的玩家坐标(与order_id一一对应)|
|data|游戏信息列表(每一条包括mid,uid,content,color)|

JSON示例:

{"status": "1", "info": {"uid": 6, "order_id": ["6", "7"], "order_name": ["123", "\u5927\u54aa\u54aa"], "position": ["4,1", "2,0"], "data": [{"content": " \u5927\u54aa\u54aa \u6267\u884c\u4e86\u4e00\u6b21\u64cd\u4f5c", "color": "0", "mid": "3", "uid": "7"}], "name": "123"}}

---

#### turn

询问当前是否是自己的回合

URL:```/turn/```

格式:```JSON```

HTTP请求方式:``GET```

请求参数:

|字段|必选|说明|
|---|---|---|
|无|

返回结果:

|字段|说明|
|---|---|
|无||


JSON示例:

{"status": "1", "info": {}}

注: status 0 为不是, 1 为是

---

#### action

询问当前是否是自己的回合

URL:```/action/```

格式:```JSON```

HTTP请求方式:``POST```

请求参数:

|字段|必选|说明|
|---|---|---|
|move|yes|玩家输入的指令|

返回结果:

|字段|说明|
|---|---|
|无||


JSON示例:

{"status": "1", "info": {}}
